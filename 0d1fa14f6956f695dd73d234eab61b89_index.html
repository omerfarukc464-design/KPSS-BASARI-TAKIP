<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KPSS BaÅŸarÄ± Takip - Ã‡alÄ±ÅŸma Ä°zleme Paneli</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
            text-align: center;
            position: relative;
        }

        .header h1 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .header p {
            color: #666;
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .motivation-badge {
            display: inline-block;
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            color: white;
            padding: 8px 20px;
            border-radius: 25px;
            font-size: 0.9em;
            font-weight: bold;
            margin-top: 10px;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            background: white;
            padding: 15px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            padding: 15px 25px;
            background: #f0f0f0;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 150px;
        }

        .tab:hover {
            background: #e0e0e0;
            transform: translateY(-2px);
        }

        .tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .tab-content {
            display: none;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            animation: fadeIn 0.5s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.2);
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            margin-top: 20px;
            position: relative;
            overflow: hidden;
        }

        .btn:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover:before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff4757 0%, #ff3838 100%);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            overflow-x: auto;
            display: block;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .data-table th, .data-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .data-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: bold;
            position: sticky;
            top: 0;
        }

        .data-table tr:hover {
            background: #f8f9ff;
        }

        .data-table tbody {
            display: table;
            width: 100%;
            table-layout: fixed;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-top: 20px;
        }

        .chart-container {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .chart-container:hover {
            transform: translateY(-5px);
        }

        .chart-container h3 {
            color: #667eea;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.4em;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            transform: rotate(45deg);
            transition: all 0.5s ease;
            opacity: 0;
        }

        .stat-card:hover::before {
            animation: shine 0.5s ease-in-out;
        }

        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); opacity: 0; }
        }

        .stat-card h4 {
            font-size: 14px;
            margin-bottom: 10px;
            opacity: 0.9;
        }

        .stat-card .value {
            font-size: 36px;
            font-weight: bold;
        }

        .stat-card .trend {
            font-size: 12px;
            margin-top: 5px;
            opacity: 0.8;
        }

        .delete-btn {
            background: linear-gradient(135deg, #ff4757 0%, #ff3838 100%);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s;
        }

        .delete-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 3px 8px rgba(255, 71, 87, 0.4);
        }

        .quick-actions {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }

        .quick-actions h3 {
            margin-bottom: 15px;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .action-btn {
            background: rgba(255,255,255,0.2);
            border: 2px solid white;
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .action-btn:hover {
            background: white;
            color: #f093fb;
        }

        .success-message {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            text-align: center;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .success-message.show {
            opacity: 1;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #f0f0f0;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .tabs {
                flex-direction: column;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .action-buttons {
                flex-direction: column;
                align-items: center;
            }
        }

        .welcome-back {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
            color: #333;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“ KPSS BaÅŸarÄ± Takip</h1>
            <p>BaÅŸarÄ±ya giden yolda her adÄ±mÄ± izleyin!</p>
            <div class="motivation-badge">âœ¨ Her GÃ¼n Bir AdÄ±m Ä°leriye</div>
        </div>

        <div id="welcomeMessage" class="welcome-back" style="display: none;">
            ğŸ‘‹ HoÅŸgeldin! Ã‡alÄ±ÅŸmalarÄ±nÄ± takip etmeye devam edebilirsin.
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showTab('dashboard')">ğŸ“Š Dashboard</button>
            <button class="tab" onclick="showTab('veri')">ğŸ“ GÃ¼nlÃ¼k Ã‡alÄ±ÅŸma</button>
            <button class="tab" onclick="showTab('deneme')">ğŸ“‹ Deneme SonuÃ§larÄ±</button>
            <button class="tab" onclick="showTab('analiz')">ğŸ“ˆ DetaylÄ± Analiz</button>
        </div>

        <!-- DASHBOARD TAB -->
        <div id="dashboard" class="tab-content active">
            <div class="quick-actions">
                <h3>âš¡ HÄ±zlÄ± Ä°ÅŸlemler</h3>
                <div class="action-buttons">
                    <button class="action-btn" onclick="quickAddToday()">+ BugÃ¼nÃ¼n Ã‡alÄ±ÅŸmasÄ±</button>
                    <button class="action-btn" onclick="quickAddExam()">+ HÄ±zlÄ± Deneme</button>
                    <button class="action-btn" onclick="exportData()">ğŸ“Š Rapor Ã‡Ä±kar</button>
                    <button class="action-btn" onclick="clearAllData()">ğŸ—‘ï¸ Verileri Temizle</button>
                </div>
            </div>

            <div id="successAlert" class="success-message">
                âœ… Ä°ÅŸlem baÅŸarÄ±yla tamamlandÄ±!
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <h4>TOPLAM SORU</h4>
                    <div class="value" id="totalQuestions">0</div>
                    <div class="trend" id="questionTrend">Bu hafta +0</div>
                </div>
                <div class="stat-card">
                    <h4>GÃœNLÃœK ORTALAMA</h4>
                    <div class="value" id="avgDaily">0</div>
                    <div class="trend" id="avgTrend">GeÃ§en hafta: 0</div>
                </div>
                <div class="stat-card">
                    <h4>SON DENEME NET</h4>
                    <div class="value" id="lastNet">0</div>
                    <div class="trend" id="netTrend">Bir Ã¶nceki: 0</div>
                </div>
                <div class="stat-card">
                    <h4>Ã‡ALIÅMA GÃœNÃœ</h4>
                    <div class="value" id="studyDays">0</div>
                    <div class="trend" id="daysTrend">Bu hafta: 0</div>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="chart-container">
                    <h3>ğŸ“ˆ GÃ¼nlÃ¼k Toplam Soru SayÄ±sÄ±</h3>
                    <canvas id="dailyChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>ğŸ¯ Deneme Net Ä°lerlemesi</h3>
                    <canvas id="examChart"></canvas>
                </div>
            </div>

            <div class="chart-container" style="margin-top: 30px;">
                <h3>ğŸ¥§ Ders BazÄ±nda Ã‡alÄ±ÅŸma DaÄŸÄ±lÄ±mÄ±</h3>
                <canvas id="pieChart" style="max-height: 400px;"></canvas>
            </div>

            <div class="chart-container" style="margin-top: 30px;">
                <h3>ğŸ“Š HaftalÄ±k Performans Trendi</h3>
                <canvas id="weeklyChart"></canvas>
            </div>
        </div>

        <!-- VERÄ° TAB -->
        <div id="veri" class="tab-content">
            <h2 style="color: #667eea; margin-bottom: 20px;">GÃ¼nlÃ¼k Ã‡alÄ±ÅŸma KaydÄ±</h2>
            
            <div class="form-row">
                <div class="form-group">
                    <label>Tarih</label>
                    <input type="date" id="tarih" required>
                </div>
                <div class="form-group">
                    <label>Ãœye AdÄ±</label>
                    <input type="text" id="uyeAdi" placeholder="AdÄ±nÄ±zÄ± girin" required>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label>ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e Soru</label>
                    <input type="number" id="turkce" placeholder="0" min="0" value="0">
                </div>
                <div class="form-group">
                    <label>ğŸ”¢ Matematik Soru</label>
                    <input type="number" id="matematik" placeholder="0" min="0" value="0">
                </div>
                <div class="form-group">
                    <label>ğŸ“š Tarih Soru</label>
                    <input type="number" id="tarihSoru" placeholder="0" min="0" value="0">
                </div>
                <div class="form-group">
                    <label>ğŸŒ CoÄŸrafya Soru</label>
                    <input type="number" id="cografya" placeholder="0" min="0" value="0">
                </div>
                <div class="form-group">
                    <label>âš–ï¸ VatandaÅŸlÄ±k Soru</label>
                    <input type="number" id="vatandaslik" placeholder="0" min="0" value="0">
                </div>
            </div>

            <button class="btn" onclick="addStudyData()">â• Ã‡alÄ±ÅŸma KaydÄ± Ekle</button>

            <div style="margin-top: 30px;">
                <h3 style="color: #667eea; margin-bottom: 15px;">ğŸ“‹ Son Ã‡alÄ±ÅŸma KayÄ±tlarÄ±</h3>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Tarih</th>
                            <th>Ãœye AdÄ±</th>
                            <th>TÃ¼rkÃ§e</th>
                            <th>Matematik</th>
                            <th>Tarih</th>
                            <th>CoÄŸrafya</th>
                            <th>VatandaÅŸlÄ±k</th>
                            <th>TOPLAM</th>
                            <th>Ä°ÅŸlem</th>
                        </tr>
                    </thead>
                    <tbody id="studyTableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- DENEME TAB -->
        <div id="deneme" class="tab-content">
            <h2 style="color: #667eea; margin-bottom: 20px;">Deneme SÄ±nav SonuÃ§larÄ±</h2>
            
            <div class="form-row">
                <div class="form-group">
                    <label>Ãœye AdÄ±</label>
                    <input type="text" id="denemeUye" placeholder="AdÄ±nÄ±zÄ± girin" required>
                </div>
                <div class="form-group">
                    <label>ğŸ¯ GK Net</label>
                    <input type="number" id="gkNet" placeholder="0" min="0" step="0.25" value="0">
                </div>
                <div class="form-group">
                    <label>ğŸ“– GY Net</label>
                    <input type="number" id="gyNet" placeholder="0" min="0" step="0.25" value="0">
                </div>
                <div class="form-group">
                    <label>ğŸ“Š Puan</label>
                    <input type="number" id="puan" placeholder="0" min="0" step="0.1" value="0">
                </div>
            </div>

            <button class="btn" onclick="addExamData()">â• Deneme Sonucu Ekle</button>

            <div style="margin-top: 30px;">
                <h3 style="color: #667eea; margin-bottom: 15px;">ğŸ† Deneme SonuÃ§larÄ±</h3>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Ãœye AdÄ±</th>
                            <th>GK Net</th>
                            <th>GY Net</th>
                            <th>TOPLAM Net</th>
                            <th>Puan</th>
                            <th>Ä°ÅŸlem</th>
                        </tr>
                    </thead>
                    <tbody id="examTableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- ANALÄ°Z TAB -->
        <div id="analiz" class="tab-content">
            <h2 style="color: #667eea; margin-bottom: 20px;">DetaylÄ± Performans Analizi</h2>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <h4>EN Ä°YÄ° GÃœN</h4>
                    <div class="value" id="bestDay">-</div>
                    <div class="trend" id="bestDayCount">0 soru</div>
                </div>
                <div class="stat-card">
                    <h4>EN Ã‡OK Ã‡ALIÅILAN DERS</h4>
                    <div class="value" id="mostStudied">-</div>
                    <div class="trend" id="mostStudiedCount">0 soru</div>
                </div>
                <div class="stat-card">
                    <h4>NET ARTIÅI</h4>
                    <div class="value" id="netIncrease">-</div>
                    <div class="trend" id="netIncreasePercent">0%</div>
                </div>
                <div class="stat-card">
                    <h4>Ã‡ALIÅMA STREAK</h4>
                    <div class="value" id="studyStreak">0</div>
                    <div class="trend">gÃ¼n Ã¼st Ã¼ste</div>
                </div>
            </div>

            <div class="chart-container" style="margin-top: 30px;">
                <h3>ğŸ“ˆ AylÄ±k Ã‡alÄ±ÅŸma Trendi</h3>
                <canvas id="monthlyChart"></canvas>
            </div>

            <div class="chart-container" style="margin-top: 30px;">
                <h3>ğŸ¯ Deneme Puan Ä°lerlemesi</h3>
                <canvas id="scoreChart"></canvas>
            </div>
        </div>
    </div>

    <script>
        let studyData = [];
        let examData = [];
        let charts = {};

        // Local Storage kullanÄ±mÄ±
        const STORAGE_KEY = 'kpss-basarÄ±-takip';

        // Sayfa yÃ¼klendiÄŸinde verileri yÃ¼kle
        function loadData() {
            const saved = localStorage.getItem(STORAGE_KEY);
            if (saved) {
                const data = JSON.parse(saved);
                studyData = data.studyData || [];
                examData = data.examData || [];
                
                if (studyData.length > 0 || examData.length > 0) {
                    document.getElementById('welcomeMessage').style.display = 'block';
                }
            }
        }

        // Verileri kaydet
        function saveData() {
            localStorage.setItem(STORAGE_KEY, JSON.stringify({
                studyData: studyData,
                examData: examData,
                lastSave: new Date().toISOString()
            }));
        }

        // BugÃ¼nÃ¼n tarihini otomatik ekle
        document.getElementById('tarih').valueAsDate = new Date();

        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');

            if (tabName === 'dashboard') {
                updateDashboard();
            } else if (tabName === 'analiz') {
                updateAnalytics();
            }
        }

        function showSuccess(message = 'Ä°ÅŸlem baÅŸarÄ±yla tamamlandÄ±!') {
            const alert = document.getElementById('successAlert');
            alert.textContent = `âœ… ${message}`;
            alert.classList.add('show');
            setTimeout(() => {
                alert.classList.remove('show');
            }, 3000);
        }

        function quickAddToday() {
            document.getElementById('tarih').valueAsDate = new Date();
            showTab('veri');
            document.getElementById('uyeAdi').focus();
        }

        function quickAddExam() {
            showTab('deneme');
            document.getElementById('denemeUye').focus();
        }

        function exportData() {
            const data = {
                studyData: studyData,
                examData: examData,
                exportedAt: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `kpss-basarÄ±-raporu-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            showSuccess('Rapor baÅŸarÄ±yla indirildi!');
        }

        function clearAllData() {
            if (confirm('TÃ¼m verilerinizi silmek istediÄŸinizden emin misiniz? Bu iÅŸlem geri alÄ±namaz!')) {
                studyData = [];
                examData = [];
                localStorage.removeItem(STORAGE_KEY);
                updateDashboard();
                updateStudyTable();
                updateExamTable();
                showSuccess('TÃ¼m veriler temizlendi!');
                document.getElementById('welcomeMessage').style.display = 'none';
            }
        }

        function addStudyData() {
            const tarih = document.getElementById('tarih').value;
            const uyeAdi = document.getElementById('uyeAdi').value;
            const turkce = parseInt(document.getElementById('turkce').value) || 0;
            const matematik = parseInt(document.getElementById('matematik').value) || 0;
            const tarihSoru = parseInt(document.getElementById('tarihSoru').value) || 0;
            const cografya = parseInt(document.getElementById('cografya').value) || 0;
            const vatandaslik = parseInt(document.getElementById('vatandaslik').value) || 0;

            if (!tarih || !uyeAdi) {
                alert('âš ï¸ LÃ¼tfen tarih ve Ã¼ye adÄ± giriniz!');
                return;
            }

            if (turkce + matematik + tarihSoru + cografya + vatandaslik === 0) {
                alert('âš ï¸ En az bir ders iÃ§in soru sayÄ±sÄ± giriniz!');
                return;
            }

            const toplam = turkce + matematik + tarihSoru + cografya + vatandaslik;

            studyData.push({
                tarih, uyeAdi, turkce, matematik, tarihSoru, cografya, vatandaslik, toplam
            });

            updateStudyTable();
            clearStudyForm();
            saveData();
            showSuccess('Ã‡alÄ±ÅŸma kaydÄ± baÅŸarÄ±yla eklendi! ğŸ‰');
        }

        function addExamData() {
            const uyeAdi = document.getElementById('denemeUye').value;
            const gkNet = parseFloat(document.getElementById('gkNet').value) || 0;
            const gyNet = parseFloat(document.getElementById('gyNet').value) || 0;
            const puan = parseFloat(document.getElementById('puan').value) || 0;

            if (!uyeAdi) {
                alert('âš ï¸ LÃ¼tfen Ã¼ye adÄ± giriniz!');
                return;
            }

            const toplamNet = gkNet + gyNet;

            examData.push({ uyeAdi, gkNet, gyNet, toplamNet, puan });

            updateExamTable();
            clearExamForm();
            saveData();
            showSuccess('Deneme sonucu baÅŸarÄ±yla eklendi! ğŸ†');
        }

        function updateStudyTable() {
            const tbody = document.getElementById('studyTableBody');
            tbody.innerHTML = '';

            // En son eklenenler Ã¼stte gÃ¶rÃ¼nsÃ¼n
            const sortedData = [...studyData].reverse();

            sortedData.forEach((data, index) => {
                const row = tbody.insertRow();
                const originalIndex = studyData.length - 1 - index;
                row.innerHTML = `
                    <td>${data.tarih}</td>
                    <td>${data.uyeAdi}</td>
                    <td>${data.turkce}</td>
                    <td>${data.matematik}</td>
                    <td>${data.tarihSoru}</td>
                    <td>${data.cografya}</td>
                    <td>${data.vatandaslik}</td>
                    <td><strong>${data.toplam}</strong></td>
                    <td><button class="delete-btn" onclick="deleteStudyData(${originalIndex})">ğŸ—‘ï¸ Sil</button></td>
                `;
            });
        }

        function updateExamTable() {
            const tbody = document.getElementById('examTableBody');
            tbody.innerHTML = '';

            const sortedData = [...examData].reverse();

            sortedData.forEach((data, index) => {
                const row = tbody.insertRow();
                const originalIndex = examData.length - 1 - index;
                row.innerHTML = `
                    <td>${data.uyeAdi}</td>
                    <td>${data.gkNet}</td>
                    <td>${data.gyNet}</td>
                    <td><strong>${data.toplamNet.toFixed(2)}</strong></td>
                    <td>${data.puan.toFixed(2)}</td>
                    <td><button class="delete-btn" onclick="deleteExamData(${originalIndex})">ğŸ—‘ï¸ Sil</button></td>
                `;
            });
        }

        function deleteStudyData(index) {
            if (confirm('Bu kaydÄ± silmek istediÄŸinizden emin misiniz?')) {
                studyData.splice(index, 1);
                updateStudyTable();
                updateDashboard();
                saveData();
                showSuccess('KayÄ±t silindi');
            }
        }

        function deleteExamData(index) {
            if (confirm('Bu deneme kaydÄ±nÄ± silmek istediÄŸinizden emin misiniz?')) {
                examData.splice(index, 1);
                updateExamTable();
                updateDashboard();
                saveData();
                showSuccess('Deneme kaydÄ± silindi');
            }
        }

        function clearStudyForm() {
            document.getElementById('turkce').value = '0';
            document.getElementById('matematik').value = '0';
            document.getElementById('tarihSoru').value = '0';
            document.getElementById('cografya').value = '0';
            document.getElementById('vatandaslik').value = '0';
            
            // Tarihi yine bugÃ¼ne ayarla
            document.getElementById('tarih').valueAsDate = new Date();
        }

        function clearExamForm() {
            document.getElementById('gkNet').value = '0';
            document.getElementById('gyNet').value = '0';
            document.getElementById('puan').value = '0';
        }

        function updateDashboard() {
            // Ä°statistikleri gÃ¼ncelle
            const totalQuestions = studyData.reduce((sum, data) => sum + data.toplam, 0);
            const avgDaily = studyData.length > 0 ? Math.round(totalQuestions / studyData.length) : 0;
            const lastNet = examData.length > 0 ? examData[examData.length - 1].toplamNet.toFixed(1) : 0;
            const studyDays = studyData.length;

            document.getElementById('totalQuestions').textContent = totalQuestions;
            document.getElementById('avgDaily').textContent = avgDaily;
            document.getElementById('lastNet').textContent = lastNet;
            document.getElementById('studyDays').textContent = studyDays;

            // Trend analizleri
            updateTrends();

            // Grafikleri gÃ¼ncelle
            updateDailyChart();
            updateExamChart();
            updatePieChart();
            updateWeeklyChart();
        }

        function updateTrends() {
            const now = new Date();
            const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
            
            // Bu hafta Ã§alÄ±ÅŸma gÃ¼nleri
            const thisWeekDays = studyData.filter(d => new Date(d.tarih) >= weekAgo).length;
            
            // GeÃ§en hafta Ã§alÄ±ÅŸma gÃ¼nleri
            const lastWeekStart = new Date(weekAgo.getTime() - 7 * 24 * 60 * 60 * 1000);
            const lastWeekDays = studyData.filter(d => {
                const date = new Date(d.tarih);
                return date >= lastWeekStart && date < weekAgo;
            }).length;

            const lastWeekAvg = lastWeekDays > 0 ? 
                Math.round(studyData.filter(d => {
                    const date = new Date(d.tarih);
                    return date >= lastWeekStart && date < weekAgo;
                }).reduce((sum, d) => sum + d.toplam, 0) / lastWeekDays) : 0;

            document.getElementById('questionTrend').textContent = `Bu hafta +${studyData.filter(d => new Date(d.tarih) >= weekAgo).reduce((sum, d) => sum + d.toplam, 0)}`;
            document.getElementById('avgTrend').textContent = `GeÃ§en hafta: ${lastWeekAvg}`;
            document.getElementById('daysTrend').textContent = `Bu hafta: ${thisWeekDays}`;

            if (examData.length >= 2) {
                const current = examData[examData.length - 1].toplamNet;
                const previous = examData[examData.length - 2].toplamNet;
                document.getElementById('netTrend').textContent = `Bir Ã¶nceki: ${previous.toFixed(1)}`;
            }
        }

        function updateAnalytics() {
            // En iyi gÃ¼n
            if (studyData.length > 0) {
                const bestDay = studyData.reduce((max, current) => 
                    current.toplam > max.toplam ? current : max
                );
                document.getElementById('bestDay').textContent = bestDay.tarih;
                document.getElementById('bestDayCount').textContent = `${bestDay.toplam} soru`;
            }

            // En Ã§ok Ã§alÄ±ÅŸÄ±lan ders
            const totals = {
                turkce: studyData.reduce((sum, d) => sum + d.turkce, 0),
                matematik: studyData.reduce((sum, d) => sum + d.matematik, 0),
                tarih: studyData.reduce((sum, d) => sum + d.tarihSoru, 0),
                cografya: studyData.reduce((sum, d) => sum + d.cografya, 0),
                vatandaslik: studyData.reduce((sum, d) => sum + d.vatandaslik, 0)
            };

            const mostStudied = Object.entries(totals).reduce((max, [key, value]) => 
                value > max.value ? { key, value } : max
            , { key: '-', value: 0 });

            const dersNames = {
                turkce: 'TÃ¼rkÃ§e',
                matematik: 'Matematik',
                tarih: 'Tarih',
                cografya: 'CoÄŸrafya',
                vatandaslik: 'VatandaÅŸlÄ±k'
            };

            document.getElementById('mostStudied').textContent = dersNames[mostStudied.key] || '-';
            document.getElementById('mostStudiedCount').textContent = `${mostStudied.value} soru`;

            // Net artÄ±ÅŸÄ±
            if (examData.length >= 2) {
                const first = examData[0].toplamNet;
                const last = examData[examData.length - 1].toplamNet;
                const increase = last - first;
                const percent = first > 0 ? ((increase / first) * 100).toFixed(1) : 0;
                
                document.getElementById('netIncrease').textContent = increase > 0 ? `+${increase.toFixed(1)}` : increase.toFixed(1);
                document.getElementById('netIncreasePercent').textContent = `${percent}%`;
            }

            // Ã‡alÄ±ÅŸma streak'i hesapla
            const streak = calculateStudyStreak();
            document.getElementById('studyStreak').textContent = streak;

            updateMonthlyChart();
            updateScoreChart();
        }

        function calculateStudyStreak() {
            if (studyData.length === 0) return 0;
            
            const sortedData = [...studyData].sort((a, b) => new Date(b.tarih) - new Date(a.tarih));
            let streak = 0;
            let currentDate = new Date();
            
            for (let i = 0; i < sortedData.length; i++) {
                const dataDate = new Date(sortedData[i].tarih);
                const daysDiff = Math.floor((currentDate - dataDate) / (1000 * 60 * 60 * 24));
                
                if (daysDiff === streak) {
                    streak++;
                } else {
                    break;
                }
            }
            
            return streak;
        }

        function updateDailyChart() {
            const ctx = document.getElementById('dailyChart').getContext('2d');
            
            if (charts.daily) {
                charts.daily.destroy();
            }

            const sortedData = [...studyData].sort((a, b) => new Date(a.tarih) - new Date(b.tarih));
            const labels = sortedData.map(d => d.tarih);
            const data = sortedData.map(d => d.toplam);

            charts.daily = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'GÃ¼nlÃ¼k Soru SayÄ±sÄ±',
                        data: data,
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        tension: 0.4,
                        fill: true,
                        pointRadius: 6,
                        pointHoverRadius: 8,
                        pointBackgroundColor: '#667eea',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        }
                    }
                }
            });
        }

        function updateExamChart() {
            const ctx = document.getElementById('examChart').getContext('2d');
            
            if (charts.exam) {
                charts.exam.destroy();
            }

            const labels = examData.map((d, i) => `${i + 1}. Deneme`);
            const data = examData.map(d => d.toplamNet);

            charts.exam = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Toplam Net',
                        data: data,
                        borderColor: '#764ba2',
                        backgroundColor: 'rgba(118, 75, 162, 0.1)',
                        tension: 0.4,
                        fill: true,
                        pointRadius: 6,
                        pointHoverRadius: 8,
                        pointBackgroundColor: '#764ba2',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        }
                    }
                }
            });
        }

        function updatePieChart() {
            const ctx = document.getElementById('pieChart').getContext('2d');
            
            if (charts.pie) {
                charts.pie.destroy();
            }

            const turkceTotal = studyData.reduce((sum, d) => sum + d.turkce, 0);
            const matematikTotal = studyData.reduce((sum, d) => sum + d.matematik, 0);
            const tarihTotal = studyData.reduce((sum, d) => sum + d.tarihSoru, 0);
            const cografyaTotal = studyData.reduce((sum, d) => sum + d.cografya, 0);
            const vatandaslikTotal = studyData.reduce((sum, d) => sum + d.vatandaslik, 0);

            const data = [turkceTotal, matematikTotal, tarihTotal, cografyaTotal, vatandaslikTotal];
            const total = data.reduce((sum, val) => sum + val, 0);

            charts.pie = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['TÃ¼rkÃ§e', 'Matematik', 'Tarih', 'CoÄŸrafya', 'VatandaÅŸlÄ±k'],
                    datasets: [{
                        data: data,
                        backgroundColor: [
                            '#667eea',
                            '#764ba2',
                            '#f093fb',
                            '#4facfe',
                            '#43e97b'
                        ],
                        borderWidth: 3,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                usePointStyle: true
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const percentage = total > 0 ? ((context.parsed / total) * 100).toFixed(1) : 0;
                                    return `${context.label}: ${context.parsed} soru (%${percentage})`;
                                }
                            }
                        }
                    }
                }
            });
        }

        function updateWeeklyChart() {
            const ctx = document.getElementById('weeklyChart').getContext('2d');
            
            if (charts.weekly) {
                charts.weekly.destroy();
            }

            // Son 7 gÃ¼nÃ¼n verilerini al
            const weekData = [];
            const weekLabels = [];
            const today = new Date();

            for (let i = 6; i >= 0; i--) {
                const date = new Date(today);
                date.setDate(date.getDate() - i);
                const dateStr = date.toISOString().split('T')[0];
                
                weekLabels.push(date.getDate() + '/' + (date.getMonth() + 1));
                
                const dayTotal = studyData
                    .filter(d => d.tarih === dateStr)
                    .reduce((sum, d) => sum + d.toplam, 0);
                
                weekData.push(dayTotal);
            }

            charts.weekly = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: weekLabels,
                    datasets: [{
                        label: 'HaftalÄ±k Soru SayÄ±sÄ±',
                        data: weekData,
                        backgroundColor: 'rgba(102, 126, 234, 0.8)',
                        borderColor: '#667eea',
                        borderWidth: 2,
                        borderRadius: 5,
                        borderSkipped: false,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        }
                    }
                }
            });
        }

        function updateMonthlyChart() {
            const ctx = document.getElementById('monthlyChart').getContext('2d');
            
            if (charts.monthly) {
                charts.monthly.destroy();
            }

            // AylÄ±k veriler
            const monthlyData = {};
            studyData.forEach(d => {
                const month = d.tarih.substring(0, 7); // YYYY-MM format
                if (!monthlyData[month]) {
                    monthlyData[month] = 0;
                }
                monthlyData[month] += d.toplam;
            });

            const sortedMonths = Object.keys(monthlyData).sort();
            const monthlyTotals = sortedMonths.map(month => monthlyData[month]);

            charts.monthly = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: sortedMonths,
                    datasets: [{
                        label: 'AylÄ±k Toplam Soru',
                        data: monthlyTotals,
                        borderColor: '#43e97b',
                        backgroundColor: 'rgba(67, 233, 123, 0.1)',
                        tension: 0.4,
                        fill: true,
                        pointRadius: 6,
                        pointHoverRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        function updateScoreChart() {
            const ctx = document.getElementById('scoreChart').getContext('2d');
            
            if (charts.score) {
                charts.score.destroy();
            }

            const labels = examData.map((d, i) => `${i + 1}. Deneme`);
            const netData = examData.map(d => d.toplamNet);
            const scoreData = examData.map(d => d.puan);

            charts.score = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'Net SayÄ±sÄ±',
                            data: netData,
                            borderColor: '#667eea',
                            backgroundColor: 'rgba(102, 126, 234, 0.1)',
                            yAxisID: 'y',
                            tension: 0.4,
                            fill: true
                        },
                        {
                            label: 'Puan',
                            data: scoreData,
                            borderColor: '#f093fb',
                            backgroundColor: 'rgba(240, 147, 251, 0.1)',
                            yAxisID: 'y1',
                            tension: 0.4,
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    scales: {
                        x: {
                            display: true,
                            title: {
                                display: true
                            }
                        },
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: {
                                display: true,
                                text: 'Net SayÄ±sÄ±'
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: 'Puan'
                            },
                            grid: {
                                drawOnChartArea: false,
                            },
                        },
                    }
                }
            });
        }

        // Sayfa yÃ¼klendiÄŸinde verileri yÃ¼kle ve dashboard'u gÃ¼ncelle
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            updateDashboard();
            updateStudyTable();
            updateExamTable();
        });

        // Otomatik kaydet (her 30 saniyede bir)
        setInterval(saveData, 30000);

        // Sayfa kapatÄ±lÄ±rken verileri kaydet
        window.addEventListener('beforeunload', saveData);
    </script>
</body>
</html>